<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en_US">

<!-- Mirrored from intranet.psi.ch/MUSR/LibFitPofB?cover=print by HTTrack Website Copier/3.x [XR&CO'2010], Thu, 31 May 2012 10:51:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-1"><!-- /Added by HTTrack -->
<head>
<link rel="stylesheet" href="../pub/System/HeadlinesPlugin/style.css" type="text/css" media="all" />
	<title> MUSR :: LibFitPofB</title>
		  
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> <meta name="robots" content="noindex" /> <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="WebRsshtml.html" />
	 <meta name="scripturl" content="https://intranet.psi.ch/wiki/bin" />
	 <meta name="scriptsuffix" content="" />

<meta name="WEBTOPIC" content="LibFitPofB" />
<meta name="WEB" content="MUSR" />
<meta name="SCRIPTURLPATH" content="/wiki/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />

	<link rel="icon" href="../pub/Main/WebPreferences/favicon.ico" type="image/x-icon" /> <link rel="shortcut icon" href="../pub/Main/WebPreferences/favicon.ico" type="image/x-icon" />
	<link rel="alternate" href="https://intranet.psi.ch/wiki/bin/edit/MUSR/LibFitPofB?t=1338461465" type="application/x-wiki" title="edit LibFitPofB" />
	<meta name="description" content="LibFitPofB" />
  <base  /><!--[if IE]></base><![endif]-->
	
	<style type="text/css" media="all">
@import url('../pub/System/SkinTemplates/base.css');
</style>
<style type="text/css" media="all">
@import url('../pub/System/PatternSkinTheme2009/layout.css');
@import url('../pub/System/PatternSkinTheme2009/style.css');
@import url('../pub/System/PatternSkinTheme2009/colors.css');
</style>
<style type="text/css" media="all">
@import url('../pub/System/PatternSkinTheme2009/column_left.css');
@import url('../pub/System/PatternSkinTheme2009/variant_twiki.css');
</style><style type="text/css" media="all">
	/* Styles that are set using variables */
	.patternBookView .foswikiTopRow,
	.patternWebIndicator a img,
	.patternWebIndicator a:hover img {
		background-color:#D0D0D0;
	}
	#patternTopBarContents { background-image:url(../pub/System/PatternSkin/header5.gif); background-repeat:repeat-x;}
#patternTopBarContents { background-color:#ffffff;}
.patternBookView {
	border-color:#D0D0D0;
}
.patternPreviewPage #patternMain {
	/* uncomment to set the preview image */
	/*background-image:url("/pub/System/PreviewBackground/preview2bg.gif");*/
}
</style>
<style type="text/css" media="all">
	@import url("../pub/System/PsiSkin/psicolors.css");
	@import url("../pub/System/PsiSkin/psistyle.css");	
.foswikiTopic {overflow: hidden;}
</style>
	


<style type="text/css" media="all">
	@import url("../pub/System/PatternSkin/print.css");
</style>
<!--[if IE]><style type="text/css" media="screen">
pre {
	height:1%;
	overflow-x:auto;
}
.foswikiAttachments,
.foswikiForm,
.foswikiHelp,
.foswikiPreviewArea,
.patternPreviewPage .foswikiForm,
.patternSigLine,
.patternToolBar,
.patternTop,
.patternTopicAction,
#patternSideBarContents .patternLeftBarPersonal,
#patternSideBarContents h2,
#patternSideBarContents li,
#patternTopBarButtons ul {
	height:1%;
}
#patternSideBarContents .patternLeftBarPersonal {
	width:100%;
}
.foswikiFormStep {
	height:100%;
}
#foswikiLogin,
.patternShadow {
	border:10px solid #fff;
	margin-top:10px;
	margin-bottom:10px;
	border:2px solid #ccc;
}
</style><![endif]-->
<!--[if gt IE 8 ]><style type="text/css" media="screen">
#foswikiLogin,
.patternShadow {
	border:10px solid #fff;
	margin-top:10px;
	margin-bottom:10px;
	box-shadow: 0 0 10px #ccc;
}
</style><![endif]-->

	
<link rel="stylesheet" href="../pub/System/FootNotePlugin/styles.css" type="text/css" media="all" /><!--FOOTNOTEPLUGIN_LINKCSS-->
</head>
<body class="foswikiNoJs patternViewPage patternPrintPage">
<a name="PageTop"></a><div class="foswikiPage"><div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<p></p>
<p></p>
<div class="patternContent"><div class="foswikiTopic">
<a name="TopIc"></a>
<h1><a name="libFitPofB"></a>  libFitPofB </h1>
<a name="foswikiTOC"></a><div class="foswikiToc"> <ul>
<li> <a href="LibFitPofB.html#libFitPofB"> libFitPofB </a>
</li> <li> <a href="LibFitPofB.html#A_1_Introduction"> 1  Introduction </a>
</li> <li> <a href="LibFitPofB.html#A_2_LE_45SR"> 2  LE-&mu;SR </a> <ul>
<li> <a href="LibFitPofB.html#A_2.1_One_45dimensional_London_model_for_the_Meissner_state_of_isotropic_superconductors"> 2.1  One-dimensional London model for the Meissner state of isotropic superconductors </a>
</li></ul> 
</li> <li> <a href="LibFitPofB.html#A_3_Conventional_40bulk_41_SR"> 3  Conventional (bulk) &mu;SR </a> <ul>
<li> <a href="LibFitPofB.html#A_3.1_Field_distributions_in_the_mixed_state_of_isotropic_superconductors"> 3.1  Field distributions in the mixed state of isotropic superconductors </a>
</li></ul> 
</li> <li> <a href="LibFitPofB.html#A_4_The_XML_startup_file"> 4  The XML startup file </a>
</li></ul> 
</div>
<a name="IntroDuction"></a>
<h1><a name="A_1_Introduction"></a> 1  Introduction </h1>
<p></p>
<code>libFitPofB</code> is a collection of <code>C++</code> classes using the <code><a href="MusrFit.html">musrfit</a></code> <code><a href="MusrFit.html#UserFunctions1">user-function interface</a></code> in order to facilitate the usage in conjunction with <code>musrfit</code>. The classes contained in this library generally implement calculations of one-dimensional static magnetic field distributions <img alt="P(B)" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_9cc0fd47eedada7247b14775bd308deb.png" title="PofB" /> which lead to muon-spin depolarization functions
<p style="text-align:center">
<img alt="\mathcal{P}(t) &#61; \int P(B)\cos\left(\gamma&#95;{\mu} B t + \varphi\right) \mathrm{d}B," class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_70e57aa1afa7d337fa46f427b34feb54.png" title="PofT" />
</p>
where <img alt="\gamma&#95;{\mu} &#61; 2\pi\times 135.54~\mathrm{MHz/T}" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_9bb7e08c8e276a92650d89d6918b3769.png" title="gamma_mu" /> is the gyromagnetic ratio of the muon and <img alt="\varphi" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_2339fd9b358ebe241da05c665668d48b.png" title="phi" /> is the initial phase of the muon spins with respect to the positron detector.<br>
At the moment the only available implementations deal with field distributions measured in local isotropic superconductors, either by means of <a href="http://lmu.web.psi.ch/lem/" target="_top">low-energy &mu;SR</a> in the Meissner state or by conventional &mu;SR in the mixed state. In the following the basic usage of the library in <code>musrfit</code> is explained&mdash;the calculations by themselves are only outlined. For further information please refer to the original literature and/or the source code of the implementation.
<p></p>
<hr />
<strong><span class='foswikiBlackFG'>Remark 1:</span></strong> In order to supply certain information needed for the calculations but not suited to be stored in the <code>musrfit</code> msr files an XML configuration file in the working directory is used. For details, see <a href="#XmlFile" class="foswikiCurrentTopicLink">below</a>.
<p></p>
<strong><span class='foswikiBlackFG'>Remark 2:</span></strong> The implementations in this library heavily rely on <code><a href="http://www.fftw.org/" target="_top">FFTW3</a></code>. In principle, it always checks what is the best way to do efficient Fourier transforms for a given machine before the transforms are actually done. If repeatedly Fourier transforms of the same (sizable) length should be done, it might be worth storing the once obtained information in an external file and just load it the next time this information is needed (<a href="http://fftw.org/fftw3_doc/Wisdom.html" target="_top">"wisdom handling"</a>). In case this feature shall be used, a valid wisdom file has to be specified in the <a href="#XmlFile" class="foswikiCurrentTopicLink">XML file</a>.
<p></p>
<strong><span class='foswikiBlackFG'>Remark 3:</span></strong> The model functions described in the following do generally not behave nicely in conjunction with <code>MINUIT</code> function minimizations (or maximizations). The analysis process at the moment in most cases involves some tedious <em>trial-and-error</em> procedure, where the displayed <code>MINUIT</code> information as always deserves attention. This is especially true if small effects should be analyzed (e.g. small diamagnetic shifts in superconductors). The parameter uncertainty in many cases has to be estimated independently. Due to these limitations, also the use of the fit option of <code><a href="Msr2Data.html">msr2data</a></code> cannot be advised.
<p></p>
<strong><span class='foswikiBlackFG'>Remark 4:</span></strong> If these classes still prove useful and results obtained through them are part of scientific publications,
an acknowledgement of the use of the library is appreciated.
<p></p>
<h1><a name="A_2_LE_45SR"></a> 2  LE-&mu;SR </h1>
<h2><a name="A_2.1_One_45dimensional_London_model_for_the_Meissner_state_of_isotropic_superconductors"></a> 2.1  One-dimensional London model for the Meissner state of isotropic superconductors </h2>
<p></p>
The models for analyzing LE-&mu;SR data assume the magnetic induction <img alt="B(z)" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_532f98969690650ac4d127919a0eda38.png" title="BofZ" /> to vary only in the dimension parallel to the momentum of the incident muons. In such a case the magnetic field distribution is given by
<p style="text-align:center">
<img alt="P(B) &#61; n(z) \left\vert \frac{\mathrm{d}B(z)}{\mathrm{d}z}\right\vert^{-1}," class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_d5a20ca7e3a33f6badc441163d1efe34.png" title="PofB-from-NofZ" />
</p>
where <img alt="n(z)" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_86f4cdca957f08c4d0ad3107b42d5502.png" title="NofZ" /> is the muon implantation profile simulated by <code>TRIM.SP</code>.
<p></p>
Assuming an array of <img alt="N" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_ae6486e95514c0c6f88837cbc62a522c.png" title="N" /> isotropic local superconductors with a total thickness <img alt="d" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_7d1f8851f7efae8cd5d65842fb528f66.png" title="d" /> in the Meissner state the magnetic induction is given by solving the 1D London equation
<p style="text-align:center">
<img alt="\frac{\partial^2}{\partial z^2}B&#95;i(z) &#61; \frac{1}{\lambda&#95;i^2}B&#95;i(z)" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_dfd02951094e1cb98f48e3f6d4562f38.png" title="London-eq" />
</p>
for each layer <img alt="i" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_c465118a8d86d5f25bba37cc1dcb38a0.png" title="i" /> taking into account the boundary conditions<a name="FootNote1text"></a><span class="FootNoteTextLink" title="F. London, Superfluids: Macroscopic Theory of Superconductivity, Dover (1961), p. 34"><a href="#FootNote1note" class="foswikiCurrentTopicLink">(1)</a></span>
<p style="text-align:center">
<img alt="B&#95;1(0) &#61; B&#95;N(d) &#61; \mu&#95;0H" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_432d7664e0756ded77e7423dd256c122.png" title="cond1" />
</p>
<p style="text-align:center">
<img alt="B&#95;i(d&#95;i) &#61; B&#95;{i+1}(d&#95;i)" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_1c744b7e1104ae8c4a6bf4f8391df10b.png" title="cond2" />
</p>
<p style="text-align:center">
<img alt="\lambda&#95;i^2B&#95;i&#39;(z)\Big\vert&#95;{z&#61;d&#95;i} &#61; \lambda&#95;{i+1}^2B&#95;{i+1}&#39;(z)\Big\vert&#95;{z&#61;d&#95;i}," class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_a5feddf35c572c4579cbef865caf8863.png" title="cond3" />
</p>
where the <img alt="d&#95;i" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_6997ecca9587ccd09cc532d4476ae3a8.png" title="d_i" /> specify the interfaces between two adjacent layers and <img alt="\lambda&#95;i" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_88f576f1799d16c1df9f3205ab2946f2.png" title="lambda_i" /> is the magnetic field penetration depth in the constituent <img alt="i" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_c465118a8d86d5f25bba37cc1dcb38a0.png" title="i" />.
<p></p>
The calculation of the field distribution has been set up for a superconducting half-space as well as superconducting thin films with up to three superconducting layers with different penetration depths. The muon-spin depolarization functions are calculated using the following lines in the THEORY block of a <code>musrfit</code> msr file: <dl>
<dt> Superconducting half-space </dt><dd> <pre>
userFcn  libFitPofB TLondon1DHS 1 2 3 4 5
</pre>
</dd></dl> 
The parameters are: <ol>
<li> phase (deg)
</li> <li> muon implantation energy as specified in the <a href="#XmlFile" class="foswikiCurrentTopicLink">XML startup file</a> (keV)
</li> <li> applied field (G)
</li> <li> thickness of the dead layer (nm)
</li> <li> magnetic field penetration depth (nm) 
</li></ol> 
<p></p> <dl>
<dt> Superconducting thin film (one layer) </dt><dd> <pre>
userFcn  libFitPofB TLondon1D1L 1 2 3 4 5 6 &#91;a b]
</pre>
</dd></dl> 
The mandatory parameters are: <ol>
<li> phase (deg)
</li> <li> muon implantation energy as specified in the <a href="#XmlFile" class="foswikiCurrentTopicLink">XML startup file</a> (keV)
</li> <li> applied field (G)
</li> <li> thickness of the dead layer (nm)
</li> <li> thickness of the actually superconducting layer (nm)
</li> <li> magnetic field penetration depth (nm) 
</li></ol> 
<p></p>
The optional parameters are: <ol>
<li type="a"> fraction <i>f</i><sub>1</sub> of muons in the thin film contributing to the signal (0 &le; <i>f</i><sub>1</sub> &le; 1)
</li> <li type="a"> fraction <i>f</i><sub>s</sub> of muons in the substrate contributing to the signal (0 &le; <i>f</i><sub>s</sub> &le; 1)
</li></ol> 
<p></p> <dl>
<dt> Superconducting thin-film bilayer heterostructure </dt><dd> <pre>
userFcn  libFitPofB TLondon1D2L 1 2 3 4 5 6 7 8 &#91;a b c]
</pre>
</dd></dl> 
The mandatory parameters are: <ol>
<li> phase (deg)
</li> <li> muon implantation energy as specified in the <a href="#XmlFile" class="foswikiCurrentTopicLink">XML startup file</a> (keV)
</li> <li> applied field (G)
</li> <li> thickness of the dead layer (nm)
</li> <li> thickness of the actually superconducting first layer (nm)
</li> <li> thickness of the actually superconducting second layer (nm)
</li> <li> magnetic field penetration depth of the first layer (nm)
</li> <li> magnetic field penetration depth of the second layer (nm)
</li></ol> 
<p></p>
The optional parameters are: <ol>
<li type="a"> fraction <i>f</i><sub>1</sub> of muons in the dead and first layer contributing to the signal (0 &le; <i>f</i><sub>1</sub> &le; 1)
</li> <li type="a"> fraction <i>f</i><sub>2</sub> of muons in the second layer contributing to the signal (0 &le; <i>f</i><sub>2</sub> &le; 1)
</li> <li type="a"> fraction <i>f</i><sub>s</sub> of muons in the substrate contributing to the signal (0 &le; <i>f</i><sub>s</sub> &le; 1)
</li></ol> 
<p></p> <dl>
<dt> Superconducting thin-film trilayer heterostructure </dt><dd> <pre>
userFcn  libFitPofB TLondon1D3L 1 2 3 4 5 6 7 8 9 10 &#91;a b c d]
</pre>
</dd></dl> 
The mandatory parameters are: <ol>
<li> phase (deg)
</li> <li> muon implantation energy as specified in the <a href="#XmlFile" class="foswikiCurrentTopicLink">XML startup file</a> (keV)
</li> <li> applied field (G)
</li> <li> thickness of the dead layer (nm)
</li> <li> thickness of the actually superconducting first layer (nm)
</li> <li> thickness of the actually superconducting second layer (nm)
</li> <li> thickness of the actually superconducting third layer (nm)
</li> <li> magnetic field penetration depth of the first layer (nm)
</li> <li> magnetic field penetration depth of the second layer (nm)
</li> <li> magnetic field penetration depth of the third layer (nm)
</li></ol> 
<p></p>
The optional parameters are: <ol>
<li type="a"> fraction <i>f</i><sub>1</sub> of muons in the dead and first layer contributing to the signal (0 &le; <i>f</i><sub>1</sub> &le; 1)
</li> <li type="a"> fraction <i>f</i><sub>2</sub> of muons in the second layer contributing to the signal (0 &le; <i>f</i><sub>2</sub> &le; 1)
</li> <li type="a"> fraction <i>f</i><sub>3</sub> of muons in the third layer contributing to the signal (0 &le; <i>f</i><sub>3</sub> &le; 1)
</li> <li type="a"> fraction <i>f</i><sub>s</sub> of muons in the substrate contributing to the signal (0 &le; <i>f</i><sub>s</sub> &le; 1)
</li></ol> 
<p></p>
<p></p>
<p></p>
Notes
<p></p>
<a name="FootNote1note"></a><span class="FootNoteLabel"><a href="LibFitPofB.html#FootNote1text" class="foswikiCurrentWebHomeLink"> <strong>1</strong> </a></span>: <span class="FootNote">F. London, Superfluids: Macroscopic Theory of Superconductivity, Dover (1961), p. 34</span> 
<p></p>
<p></p>
<p></p>
<hr />
<p></p>
<h1><a name="A_3_Conventional_40bulk_41_SR"></a> 3  Conventional (bulk) &mu;SR </h1>
<h2><a name="A_3.1_Field_distributions_in_the_mixed_state_of_isotropic_superconductors"></a> 3.1  Field distributions in the mixed state of isotropic superconductors </h2>
<p></p>
When investigating superconductors in the mixed state by means of conventional &mu;SR a two-dimensional flux-line lattice is probed randomly by the muons. The spatial field distributions within such an ordered lattice are modeled using the Fourier series
<p style="text-align:center">
<img alt="B(\mathbf{r}) &#61; \langle B \rangle \sum\limits&#95;{\mathbf{K}}B&#95;{\mathbf{K}}\exp(-\imath\mathbf{K}\mathbf{r})," class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_c25933e91d56089992506f463d71de8f.png" title="spatialB" />
</p>
where <img alt="\mathbf{r}&#61;(x,y)" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_e47f33589d28eaa3f9baccb7a80fdbaa.png" title="r" />, <img alt="\mathbf{K}" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_e6688a12ee4e821abc31b4c1dd511539.png" title="K" /> are the reciprocal lattice vectors of a two-dimensional vortex lattice and the <img alt="B&#95;{\mathbf{K}}" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_8fa3ac8f18b7bc49eb89163d6528684c.png" title="Bk" /> are the Fourier coefficients depending on the magnetic penetration depth <img alt="\lambda" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_28f3ed750a4819b4256c2f9be649f594.png" title="lambda" /> and the superconducting coherence length <img alt="\xi" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_e8414d477977d226317c020980b7d34f.png" title="xi" />. The <img alt="B&#95;{\mathbf{K}}" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_8fa3ac8f18b7bc49eb89163d6528684c.png" title="Bk" /> for some specific models are as follows: <dl>
<dt> London model with Gaussian cutoff<a name="FootNote2text"></a><span class="FootNoteTextLink" title="E.H. Brandt, <a href="http://dx.doi.org/10.1007/BF00683568" target="_top">J. Low Temp. Phys. <strong>73</strong>, 355 (1988)</a>."><a href="#FootNote2note" class="foswikiCurrentTopicLink">(2)</a></span> </dt><dd> <p style="text-align:center"><img alt="B&#95;{\mathbf{K}} &#61; \frac{\exp\left({-K^2\xi^2/2}\right)}{1 + K^2\lambda^2}" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_469d5d1b83125e4915e2f073d8150b12.png" title="BkLondon" /></p>
</dd> <dt> Modified London model<a name="FootNote3text"></a><span class="FootNoteTextLink" title="T.M. Riseman <em>et al.</em>, <a href="http://dx.doi.org/10.1103/PhysRevB.52.10569" target="_top">Phys. Rev. B <strong>52</strong>, 10569 (1995)</a>."><a href="#FootNote3note" class="foswikiCurrentTopicLink">(3)</a></span> </dt><dd> <p style="text-align:center"><img alt="B&#95;{\mathbf{K}} &#61; \frac{\exp\left({-K^2\xi^2/2(1-b)}\right)}{1 + K^2\lambda^2/(1-b)}," class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_b6719fad8e30208538b34bc94040b7a5.png" title="BkML" /></p> where <img alt="b &#61; \langle B \rangle/\mu&#95;0H&#95;{\mathrm{c}2}." class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_039b3b38df7c6f284089c14f1efdf643.png" title="b" />
</dd> <dt> Analytical Ginzburg-Landau model<a name="FootNote4text"></a><span class="FootNoteTextLink" title="A. Yaouanc, P. Dalmas de R&eacute;otier and E.H. Brandt, <a href="http://dx.doi.org/10.1103/PhysRevB.55.11107" target="_top">Phys. Rev. B <strong>55</strong>, 11107 (1997)</a>."><a href="#FootNote4note" class="foswikiCurrentTopicLink">(4)</a></span> </dt><dd> <p style="text-align:center"><img alt="B&#95;{\mathbf{K}} &#61; \frac{f&#95;{\infty}K&#95;1\left(\frac{\xi&#95;v}{\lambda}\sqrt{f&#95;{\infty}^2+\lambda^2K^2}\right)}{K&#95;1\left(\frac{\xi&#95;v}{\lambda}f&#95;{\infty}\right)\sqrt{f&#95;{\infty}^2+\lambda^2K^2}}," class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_3146cb17887e3a20cc2078f103605af5.png" title="BkAGL" /></p> where <img alt="f&#95;{\infty} &#61; 1 - b^4,~\xi&#95;v &#61; \xi\left(\sqrt{2}-{3\xi}/\left({4\lambda}\right)\right)\sqrt{(1+b^4)(1-2b(1-b)^2)}" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_e0b0e98f9a3974249b42b6910523c8a4.png" title="f_inf_and_xi_v" /> and <img alt="K&#95;1" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_3cee3cc69dbe918398ec39a72a465014.png" title="K1" /> is a modified Bessel function.
</dd></dl> 
Apart from the mentioned analytical models the <strong>numerical Ginzburg-Landau model</strong> <a name="FootNote5text"></a><span class="FootNoteTextLink" title="E.H. Brandt, <a href="http://dx.doi.org/10.1103/PhysRevB.68.054506" target="_top">Phys. Rev. B <strong>68</strong>, 054506 (2003)</a>."><a href="#FootNote5note" class="foswikiCurrentTopicLink">(5)</a></span> is available. In this case <img alt="B(\mathbf{r})" class="mmpImage" src="../pub/MUSR/LibFitPofB/_MathModePlugin_373e9bf1fc97e2c6aacf93bcc090402c.png" title="BofR" /> is obtained by an iterative minimization of the free energy of the vortex lattice.
<p></p>
<span class='foswikiRedFG'>Concerning the applicability (e.g. field regions) of each of the mentioned models please refer to the original publications!</span>
<p></p>
At the moment, the calculation of the field distribution has been implemented for triangular flux-line lattices. The number of grid lines in which the inter-vortex distance is divided for the calculations to be specified through the <a href="#XmlFile" class="foswikiCurrentTopicLink">XML file</a>.<br>The muon-spin depolarization functions finally are calculated using the following lines in the THEORY block of a <code>musrfit</code> msr file: <dl>
<dt> 2D triangular vortex lattice, London model with Gaussian cutoff </dt><dd> <pre>
userFcn  libFitPofB TBulkTriVortexLondon 1 2 3 4
</pre>
</dd></dl> 
The parameters are: <ol>
<li> phase (deg)
</li> <li> mean magnetic induction (G)
</li> <li> magnetic penetration depth (nm)
</li> <li> Ginzburg-Landau coherence length (nm)
</li></ol> 
<p></p> <dl>
<dt> 2D triangular vortex lattice, modified London model </dt><dd> <pre>
userFcn  libFitPofB TBulkTriVortexML 1 2 3 4
</pre>
</dd></dl> 
The parameters are: <ol>
<li> phase (deg)
</li> <li> mean magnetic induction (G)
</li> <li> magnetic penetration depth (nm)
</li> <li> Ginzburg-Landau coherence length (nm)
</li></ol> 
<p></p> <dl>
<dt> 2D triangular vortex lattice, analytical Ginzburg-Landau model </dt><dd> <pre>
userFcn  libFitPofB TBulkTriVortexAGL 1 2 3 4
</pre>
</dd></dl> 
The parameters are: <ol>
<li> phase (deg)
</li> <li> mean magnetic induction (G)
</li> <li> magnetic penetration depth (nm)
</li> <li> Ginzburg-Landau coherence length (nm)
</li></ol> 
<p></p> <dl>
<dt> 2D triangular vortex lattice, numerical Ginzburg-Landau model </dt><dd> <pre>
userFcn  libFitPofB TBulkTriVortexNGL 1 2 3 4
</pre>
</dd></dl> 
The parameters are: <ol>
<li> phase (deg)
</li> <li> mean magnetic induction (G)
</li> <li> magnetic penetration depth (nm)
</li> <li> Ginzburg-Landau coherence length (nm)
</li></ol> 
<p></p>
<strong><span class='foswikiBlackFG'>Remark:</span></strong> In order to improve the convergence of <code>MIGRAD</code> it has proven useful to use the log-likelihood maximization instead of the &chi;<sup>2</sup> minimization routines and to choose sufficiently large initial steps for the parameters. Calling <code>MINOS</code> in conjunction with these functions is futile.<br>Therefore, the <a href="MusrFit.html#TheCommandsBlock">COMMANDS block</a> of the msr file could look like:
<pre>
COMMANDS
STRATEGY 0
MAX&#95;LIKELIHOOD
MIGRAD
HESSE
SAVE
</pre>
<p></p>
<p></p>
<p></p>
Notes
<p></p>
<a name="FootNote2note"></a><span class="FootNoteLabel"><a href="LibFitPofB.html#FootNote2text" class="foswikiCurrentWebHomeLink"> <strong>2</strong> </a></span>: <span class="FootNote">E.H. Brandt, <a href="http://dx.doi.org/10.1007/BF00683568" target="_top">J. Low Temp. Phys. <strong>73</strong>, 355 (1988)</a>.</span> 
<p></p>
<a name="FootNote3note"></a><span class="FootNoteLabel"><a href="LibFitPofB.html#FootNote3text" class="foswikiCurrentWebHomeLink"> <strong>3</strong> </a></span>: <span class="FootNote">T.M. Riseman <em>et al.</em>, <a href="http://dx.doi.org/10.1103/PhysRevB.52.10569" target="_top">Phys. Rev. B <strong>52</strong>, 10569 (1995)</a>.</span> 
<p></p>
<a name="FootNote4note"></a><span class="FootNoteLabel"><a href="LibFitPofB.html#FootNote4text" class="foswikiCurrentWebHomeLink"> <strong>4</strong> </a></span>: <span class="FootNote">A. Yaouanc, P. Dalmas de R&eacute;otier and E.H. Brandt, <a href="http://dx.doi.org/10.1103/PhysRevB.55.11107" target="_top">Phys. Rev. B <strong>55</strong>, 11107 (1997)</a>.</span> 
<p></p>
<a name="FootNote5note"></a><span class="FootNoteLabel"><a href="LibFitPofB.html#FootNote5text" class="foswikiCurrentWebHomeLink"> <strong>5</strong> </a></span>: <span class="FootNote">E.H. Brandt, <a href="http://dx.doi.org/10.1103/PhysRevB.68.054506" target="_top">Phys. Rev. B <strong>68</strong>, 054506 (2003)</a>.</span> 
<p></p>
<p></p>
<p></p>
<hr />
<p></p>
<a name="XmlFile"></a>
<h1><a name="A_4_The_XML_startup_file"></a> 4  The XML startup file </h1>
<code><b>BMW_startup.xml</b></code> is a configuration file located in the working directory. In this file some settings like the time and field resolution of the calculations as well as the present muon implantation profiles for a LE-&mu;SR analysis have to be defined. The following XML tags are allowed to define settings: <dl>
<dt> &lt;debug&gt;ONE_OR_ZERO&lt;/debug&gt; </dt><dd> activate the debugging output of the settings read from the XML file by setting <strong>1</strong>, deactivate it with <strong>0</strong>
</dd> <dt> &lt;wisdom&gt;PATH_TO_FILE&lt;/wisdom&gt; </dt><dd> specify the <strong>PATH_TO_FILE</strong> to an <a href="http://fftw.org/fftw3_doc/Wisdom.html#Wisdom" target="_top">FFTW3 wisdom file</a> that should be used; if the <strong>PATH_TO_FILE</strong> is invalid, no FFTW3 wisdom will be used
</dd> <dt> &lt;delta_t&gt;ResT&lt;/delta_t&gt; </dt><dd> set the time resolution <strong>ResT</strong> for the calculated depolarization function in <strong>microseconds</strong>
</dd> <dt> &lt;delta_B&gt;ResB&lt;/delta_B&gt; </dt><dd> set the field resolution <strong>ResB</strong> for the calculated field distribution in <strong>Gauss</strong>
</dd> <dt> &lt;VortexLattice&gt;&lt;/VortexLattice&gt; </dt><dd> set the parameters used for the calculation of the spatial field distribution of a vortex lattice <dl>
<dt> &lt;N_VortexGrid&gt;N&lt;/N_VortexGrid&gt; </dt><dd> specify the number of points <strong>N</strong> (in each of the two dimensions) for which the fields within the vortex lattice are calculated (inside a &lt;VortexLattice&gt; environment)
</dd></dl> 
</dd> <dt> &lt;LEM&gt;&lt;/LEM&gt; </dt><dd> set the parameters used for the calculation of LE-&mu;SR field distributions <dl>
<dt> &lt;data_path&gt;DATA_PATH_PREFIX&lt;/data_path&gt; </dt><dd> specify the <strong>DATA_PATH_PREFIX</strong> to the <code>TRIM.SP</code> implantation profiles (inside a &lt;LEM&gt; environment)
</dd> <dt> &lt;N_theory&gt;N_THEORY&lt;/N_theory&gt; </dt><dd> specify the number of points <strong>N_THEORY</strong> for which <i>B</i>(<i>z</i>) is calculated (inside a &lt;LEM&gt; environment)<br>The specification of this number is not needed if the calculation of the inverse of <i>B</i>(<i>z</i>) is implemented!
</dd> <dt> &lt;energy_list&gt;&lt;/energy_list&gt; </dt><dd> set the energies for which <code>TRIM.SP</code> implantation profiles are available (inside a &lt;LEM&gt; environment) <dl>
<dt> &lt;energy_label&gt;LABEL&lt;/energy_label&gt; </dt><dd> specify the <strong>LABEL</strong> within the file name of a available <code>TRIM.SP</code> RGE file (inside a &lt;energy_list&gt; environment)<br><span class='foswikiBlueFG'>The expected name of the RGE file will be: <strong>DATA_PATH_PREFIX</strong> + <strong>LABEL</strong> + .rge</span>
</dd> <dt> &lt;energy&gt;E&lt;/energy&gt; </dt><dd> specify the muon energy <strong>E</strong> (in <strong>keV</strong>) belonging to the <code>TRIM.SP</code> RGE file given above (inside a &lt;energy_list&gt; environment)
</dd></dl> 
</dd></dl> 
</dd></dl> 
<p></p>
An example XML file looks as follows:
<pre class="html">
&#60;?xml version&#61;&#34;1.0&#34; encoding&#61;&#34;UTF-8&#34;?&#62;
&#60;BMW&#62;
    &#60;debug&#62;0&#60;/debug&#62;
    &#60;wisdom&#62;/home/user/WordsOfWisdom.dat&#60;/wisdom&#62;
    &#60;delta&#95;t&#62;0.01&#60;/delta&#95;t&#62;
    &#60;delta&#95;B&#62;0.5&#60;/delta&#95;B&#62;
    &#60;VortexLattice&#62;
        &#60;N&#95;VortexGrid&#62;1024&#60;/N&#95;VortexGrid&#62;
    &#60;/VortexLattice&#62;
    &#60;LEM&#62;
        &#60;data&#95;path&#62;/home/user/TrimSP/some-sample-&#60;/data&#95;path&#62;
        &#60;N&#95;theory&#62;5000&#60;/N&#95;theory&#62;
        &#60;energy&#95;list&#62;
          &#60;energy&#95;label&#62;02&#95;0&#60;/energy&#95;label&#62;
          &#60;energy&#62;2.0&#60;/energy&#62;
          &#60;energy&#95;label&#62;03&#95;0&#60;/energy&#95;label&#62;
          &#60;energy&#62;3.0&#60;/energy&#62;
          &#60;energy&#95;label&#62;03&#95;6&#60;/energy&#95;label&#62;
          &#60;energy&#62;3.6&#60;/energy&#62;
          &#60;energy&#95;label&#62;05&#95;0&#60;/energy&#95;label&#62;
          &#60;energy&#62;5.0&#60;/energy&#62;
          &#60;energy&#95;label&#62;05&#95;3&#60;/energy&#95;label&#62;
          &#60;energy&#62;5.3&#60;/energy&#62;
        &#60;/energy&#95;list&#62;
   &#60;/LEM&#62;
&#60;/BMW&#62;
</pre>
<p></p>
-- <a href="http://www.fsf.org/register_form?referrer=8369" target="_top">BMW</a> &amp; <a href="http://lmu.web.psi.ch/lem/group.html" target="_top">AS</a></div><!-- /foswikiTopic-->
<p></p>
<div id="attachment_list" style="display:none"></div>
<p></p>
</div><!-- /patternContent vom pattern template-->
<p></p>
</div>
</div>
</div>
<div class="clear">&nbsp;</div>
</div><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar">Ideas, requests, problems regarding <a href="https://intranet.psi.ch/Main/WebHome">PSI Wiki</a>? <a href="mailto&#58;psi&#46;intranet&#64;psi&#46;ch&#63;subject&#61;PSI&#32;Wiki&#37;20Feedback&#37;20on&#37;20MUSR&#46;LibFitPofB">Send feedback</a></div></div></div>
</div>
</div>
</div>
</div></div><!-- /endWrap -->
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
</body>

<!-- Mirrored from intranet.psi.ch/MUSR/LibFitPofB?cover=print by HTTrack Website Copier/3.x [XR&CO'2010], Thu, 31 May 2012 10:51:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-1"><!-- /Added by HTTrack -->
</html>
<p></p>
<p></p>