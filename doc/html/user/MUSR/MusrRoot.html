<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">

<!-- Mirrored from intranet.psi.ch/MUSR/MusrRoot?cover=print by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 23 Feb 2015 15:21:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-1"><!-- /Added by HTTrack -->
<head>
<link rel="stylesheet" href="../pub/System/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title>   MUSR :: MusrRoot</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="../pub/Main/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="../pub/Main/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="alternate" href="https://intranet.psi.ch/wiki/bin/edit/MUSR/MusrRoot?t=1424704900" type="application/x-wiki" title="edit MusrRoot" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="WebRsshtml.html" />
<base  /><!--[if IE]></base><![endif]-->
<link rel='stylesheet' href='../pub/System/ImagePlugin/style.css' media='all' />
<style type="text/css" media="all">
@import url('../pub/System/SkinTemplates/base.css');
</style>
<style type="text/css" media="all">
@import url('../pub/System/PatternSkinTheme2009/layout.css');
@import url('../pub/System/PatternSkinTheme2009/style.css');
@import url('../pub/System/PatternSkinTheme2009/colors.css');
</style>
<style type="text/css" media="all">
@import url('../pub/System/PatternSkinTheme2009/column_left.css');
@import url('../pub/System/PatternSkinTheme2009/variant_twiki.css');
</style><style type="text/css" media="all">
	/* Styles that are set using variables */
	.patternBookView .foswikiTopRow,
	.patternWebIndicator a img,
	.patternWebIndicator a:hover img {
		background-color:#D0D0D0;
	}
	#patternTopBarContents { background-image:url(../pub/System/PatternSkin/header5.gif); background-repeat:repeat-x;}
#patternTopBarContents { background-color:#ffffff;}
.patternBookView {
	border-color:#D0D0D0;
}
.patternPreviewPage #patternMain {
	/* uncomment to set the preview image */
	/*background-image:url("/pub/System/PreviewBackground/preview2bg.gif");*/
}
</style>
<style type="text/css" media="all">
	@import url("../pub/System/PsiSkin/psicolors.css");
	@import url("../pub/System/PsiSkin/psistyle.css");	
.foswikiTopic {overflow: hidden;}
</style>
	


<style type="text/css" media="all">
	@import url("../pub/System/PatternSkin/print.css");
</style>
<!--[if IE]><style type="text/css" media="screen">
pre {
	height:1%;
	overflow-x:auto;
}
.foswikiAttachments,
.foswikiForm,
.foswikiHelp,
.foswikiPreviewArea,
.patternPreviewPage .foswikiForm,
.patternSigLine,
.patternToolBar,
.patternTop,
.patternTopicAction,
#patternSideBarContents .patternLeftBarPersonal,
#patternSideBarContents h2,
#patternSideBarContents li,
#patternTopBarButtons ul {
	height:1%;
}
#patternSideBarContents .patternLeftBarPersonal {
	width:100%;
}
.foswikiFormStep {
	height:100%;
}
#foswikiLogin,
.patternShadow {
	border:10px solid #fff;
	margin-top:10px;
	margin-bottom:10px;
	border:2px solid #ccc;
}
</style><![endif]-->
<!--[if gt IE 8 ]><style type="text/css" media="screen">
#foswikiLogin,
.patternShadow {
	border:10px solid #fff;
	margin-top:10px;
	margin-bottom:10px;
	box-shadow: 0 0 10px #ccc;
}
</style><![endif]-->
<link rel="stylesheet" href="../pub/System/FootNotePlugin/styles.css" type="text/css" media="all" /><!--FOOTNOTEPLUGIN_LINKCSS-->
</head>
<body class="foswikiNoJs patternViewPage">
<a name="PageTop"></a><div class="foswikiPage"><div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath foswikiLeft"></span><span class="patternToolBar foswikiRight"><span><a href='MusrRootc99a.html?cover=print;cover=print' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='foswikiAccessKey'>P</span>rint version</a></span><a href="https://intranet.psi.ch/MUSR/MusrRoot?restrictions=on" id="restriction_link"><img src='../pub/System/PsiSkin/lock_open.png' class='lock' height='16' width='23' title='open in PSI - click for more information'/></a></span><div class="foswikiClear"></div></div><div class="foswikiContentHeader">
<p></p>
<p></p>
  
  
  
<p></p>
<p></p>
<p></p>
<p></p>
</div><div class="patternContent"><div class="foswikiTopic">
<h1><a name="A_61_61MusrRoot_61_61"></a>  <code><b>MusrRoot</b></code> </h1>
<p></p>
<a name="foswikiTOC"></a><div class="foswikiToc"> <ul>
<li> <a href="MusrRoot.html#A_61_61MusrRoot_61_61"> MusrRoot </a>
</li> <li> <a href="MusrRoot.html#A_1_Introduction"> 1  Introduction </a>
</li> <li> <a href="MusrRoot.html#A_2_Some_Basics_Concerning_61ROOT_61_Files"> 2  Some Basics Concerning ROOT Files </a>
</li> <li> <a href="MusrRoot.html#A_3_61MusrRoot_61_an_Extensible_Open_File_Format_for_SR"> 3 MusrRoot an Extensible Open File Format for &#956;SR </a> <ul>
<li> <a href="MusrRoot.html#A_3.1_Run_Information_Contained_in_61RunHeader_61"> 3.1  Run Information Contained in RunHeader </a> <ul>
<li> <a href="MusrRoot.html#A_3.1.1_61RunInfo_61_Overview"> 3.1.1 RunInfo Overview </a>
</li></ul> 
</li></ul> 
</li> <li> <a href="MusrRoot.html#A_4_61TMusrRunHeader_61_Concept"> 4 TMusrRunHeader Concept </a> <ul>
<li> <a href="MusrRoot.html#A_4.1_User_Interface_for_61MusrRoot_61_Run_Header"> 4.1  User Interface for MusrRoot Run Header </a> <ul>
<li> <a href="MusrRoot.html#A_4.1.1_Writing_a_61MusrRoot_61_Run_Header"> 4.1.1  Writing a MusrRoot Run Header </a>
</li> <li> <a href="MusrRoot.html#A_4.1.2_Reading_a_61MusrRoot_61_Run_Header"> 4.1.2  Reading a MusrRoot Run Header </a>
</li></ul> 
</li> <li> <a href="MusrRoot.html#A_4.2_Validation_of_a_61MusrRoot_61_File"> 4.2  Validation of a MusrRoot File </a>
</li></ul> 
</li> <li> <a href="MusrRoot.html#A_5_61RunInfo_61_Required"> 5 RunInfo Required </a>
</li> <li> <a href="MusrRoot.html#A_6_61DetectorInfo_61_Required"> 6 DetectorInfo Required </a>
</li> <li> <a href="MusrRoot.html#A_7_61SampleEnvironmentInfo_61_Required"> 7 SampleEnvironmentInfo Required </a>
</li> <li> <a href="MusrRoot.html#A_8_61MagneticFieldEnvironmentInfo_61_Required"> 8 MagneticFieldEnvironmentInfo Required </a>
</li> <li> <a href="MusrRoot.html#A_9_61BeamlineInfo_61_Required"> 9 BeamlineInfo Required </a>
</li> <li> <a href="MusrRoot.html#A_10_Exhaustive_61MusrRoot_61_Tree_Including_Everything_Required"> 10  Exhaustive MusrRoot Tree Including Everything Required </a>
</li> <li> <a href="MusrRoot.html#A_11_61TMusrRunPhysicalQuantity_61_45_Possible_Representations"> 11 TMusrRunPhysicalQuantity - Possible Representations </a>
</li></ul> 
</div>
<p></p>
<h1><a name="A_1_Introduction"></a> 1  Introduction </h1>
Until 2011 different &#956;SR file formats were used within PSI. The bulk-&#956;SR instruments were writing their data in the <code>PSI-BIN</code> file format, which is a fixed binary format with rather stringent limitations. The LE-&#956;SR (LEM) instrument was using a <code>ROOT</code> (CERN) based file format which was tightly tailored to the special needs of the LEM instrument. This situation was unsatisfactorily and hence it was decided to move forward to a open file format called <code>MusrRoot</code> to be described in the following.
<p></p>
<h1><a name="A_2_Some_Basics_Concerning_61ROOT_61_Files"></a> 2  Some Basics Concerning <code>ROOT</code> Files </h1>
The &#956;SR data acquisition systems at PSI are utilizing <code>MIDAS</code> (see <a href="http://midas.psi.ch/" target="_top">Midas Home Page</a> ). The <code>MIDAS</code> analyzer, which is responsible to build histograms, especially the &#956;SR decay histograms, makes it very easy to build <code>ROOT</code> (see <a href="http://root.cern.ch/" target="_top">ROOT/CERN home page</a> ) histogram objects (these are <code>TH1F</code> objects for &#956;SR decay histograms). <code>ROOT</code> is a C++ object-oriented data mining frame work. These histograms can be collected and saved in <code>ROOT</code> files (<code>TFile</code>). In order to ease the understanding of the upcoming definitions, a few <code>ROOT</code> related things shall be summaries here. For details concerning the <code>ROOT</code> frame work documentation please check <a href="http://root.cern.ch/drupal/content/users-guide" target="_top">ROOT/CERN Users Guide</a> and <a href="http://root.cern.ch/drupal/content/reference-guide" target="_top">ROOT/CERN Reference Guide</a> .
<p></p>
<code>ROOT</code> files (<code>TFile</code>) are binary files which can hold any kind of objects. A <code>TFile</code> is organized similarly to a directory structure of an operating system. Within the <code>ROOT</code> framework, there is a <code>TFile</code> browser available which allows to inspect these files. This browser (<code>TBrowser</code>) will show all object saved in the <code>TFile</code> directly, if they derive from <code>TObject</code>.
<p></p>
The <code>MusrRoot</code> file format to be described below is only using a small subset of possible <code>ROOT</code> objects, namely:
<p></p> <ul>
<li> <code>TFolder</code>: this are the top level objects in the <code>MusrRoot</code> file.
</li> <li> <code>TH1F</code>: Hold the &#956;-decay-histograms.
</li> <li> <code>TObjArray</code>: Holding collection of header information.
</li> <li> <code>TObjString</code>: Holding the content of any header information.
</li></ul> 
<p></p>
Since all these objects are deriving form <code>TObject</code>, they will be directly accessible via the <code>TBrowser</code> -object. For instance, the &#956;-decay-histograms can be directly plotted, are even fitted, out of the box.
<p></p>
<h1><a name="A_3_61MusrRoot_61_an_Extensible_Open_File_Format_for_SR"></a> 3  <code>MusrRoot</code> an Extensible Open File Format for &#956;SR </h1>
<p></p>
As mentioned before, <code>ROOT</code> files are open-file-format files meaning that they can contain more entries (and most probably will) than the ones specified in the following. The specified ones will be the mandatory ones for <em>all</em> instruments. Before defining all mandatory entries, the <code>MusrRoot</code> file structure shall be sketched.
<p></p>
The <code>MusrRoot</code> file structure looks like:
<pre>
histos ---&#124;
          &#124;- DecayAnaModule ---&#124;
          &#124;                    &#124;- hDecay001
          &#124;                    &#124;- hDecay002
          &#124;                    ...
          &#124;
          &#124;- SCAnaModule ---&#124;
          ...               &#124;- hSampleTemperature
                            &#124;- hSampleMagneticField
                            ...
RunHeader ---&#124;
             &#124;- RunInfo
             &#124;- DetectorInfo ---&#124;
             &#124;                  &#124;- Detector001
             &#124;                  &#124;- Detector002
             &#124;                  ...
             &#124;
             &#124;- SampleEnvironmentInfo
             &#124;- MagneticFieldEnvironmentInfo
             &#124;- BeamlineInfo
             ...
</pre>
where <code>hDecay001</code>, etc. are <code>ROOT</code> histograms (to be more specific: <code>TH1F</code>), containing the &#956;SR decay histograms. There can be as many as needed, especially there is no limitation about their length. The histogram object names will be <code>hDecayXXX</code>, where <code>XXX</code> (leading zero <code>int</code>, <em>i.e.</em> <code>%03d</code> in C/C++ notation, starting with `1') is the histogram number. The title and name of the histogram (see description of the <code>TH1F</code> <code>ROOT</code> class) contains the label of the histogram, like `top', `forward', etc. How many of these histograms are present is accessible through the <code>RunInfo</code> folder in which the necessary header information are found (details see next sections). The folder <code>SCAnaModule</code> contains histograms of some of the slow-control parameters, as for instance the sample temperature versus time, the applied field versus time, etc. Again the label of the histogram will give more specific information about its content.
<p></p>
<h2><a name="A_3.1_Run_Information_Contained_in_61RunHeader_61"></a> 3.1  Run Information Contained in <code>RunHeader</code> </h2>
The <code>RunHeader</code> contains all needed meta-information to describe a &#956;SR-run. The list of the <em>minimal number of required</em> "folders" of the <code>RunHeader</code> is given in the following structure:
<p></p>
<pre>
RunHeader (TFolder) ---&#124;
                       &#124;- RunInfo (TObjArray)
                       &#124;- DetectorInfo (TObjArray)
                       &#124;- SampleEnvironmentInfo (TObjArray)
                       &#124;- MagneticFieldEnvironmentInfo (TObjArray)
                       &#124;- BeamlineInfo (TObjArray)
</pre>
<p></p>
In brackets the object type is given. <code>RunInfo</code> contains most information relevant for the user and will be itemized Sec. <a href="#RunInfo" class="foswikiCurrentTopicLink">RunInfo Overview</a> and <a href="#RunInfoRequired" class="foswikiCurrentTopicLink">RunInfo Required</a>. <code>DetectorInfo</code> contains detector specific information, like detector name, time zero bin, etc. (details in Sec. <a href="#DetectorInfoRequired" class="foswikiCurrentTopicLink">DetectorInfo Required</a>). <code>SampleEnvironmentInfo</code> (details in Sec. <a href="#SampleEnvironmentInfoRequired" class="foswikiCurrentTopicLink">SampleEnvironmentInfo Required</a>), and <code>MagneticFieldEnvironmentInfo</code> (details in Sec. <a href="#MagneticFieldEnvironmentInfoRequired" class="foswikiCurrentTopicLink">MagneticFieldEnvironmentInfo Required</a>) store additional, more detailed information concerning the sample environment. <code>BeamlineInfo</code> stores beamline relevant information (details in Sec. <a href="#BeamlineInfoRequired" class="foswikiCurrentTopicLink">BeamlineInfo Required</a>).
<p></p>
Before elaborating more on the required items within this structure, a few words on the <code>ROOT</code> types used here: <code>RunHeader</code> is a <code>TFolder</code> object. All the "sub-directory" entries are of type <code>TObjArray</code> and collect items of type <code>TObjString</code> or other <code>TObjArray</code> (<em>i.e.</em> sub-directories and sub-sub-directories, etc.).
<p></p>
<a name="RunInfo"></a>
<h3><a name="A_3.1.1_61RunInfo_61_Overview"></a> 3.1.1  <code>RunInfo</code> Overview  </h3>
<p></p>
<table class="foswikiTable" rules="none" border="1">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column">Name</a> </th>
			<th align="center" class="foswikiTableCol1"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column">Internal Type</a> </th>
			<th align="center" class="foswikiTableCol2 foswikiLastCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column">Comment</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Version </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> SVN version of <code>TMusrRunHeader</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Generic Validator URL </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td align="center" class="foswikiTableCol2 foswikiLastCol"> URL of the generic <code>MusrRoot</code> validation xsd-file. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Specific Validator URL </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td align="center" class="foswikiTableCol2 foswikiLastCol"> URL of the instrument specific validation xsd-file. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Generator </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> Program which wrote the <code>MusrRoot</code> file, </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> &nbsp; </td>
			<td class="foswikiTableCol1"> &nbsp; </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em>  <code>nemu_analyzer</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> File Name </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> File name of the <code>MusrRoot</code> file, </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> &nbsp; </td>
			<td class="foswikiTableCol1"> &nbsp; </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em>  <code>deltat_tdc_gps_4295.root</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Title </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Number </td>
			<td align="center" class="foswikiTableCol1"> <code>Int_t</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Start Time </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> ISO 8601 date time </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Stop Time </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> ISO 8601 date time </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Duration </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> run duration in sec </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Laboratory </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> PSI </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Instrument </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> GPS </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Muon Beam Momentum </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> 28.1 MeV/c </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Muon Species </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> positive, or negative muon </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Muon Source </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> Target E - Low Energy Muons or </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> &nbsp; </td>
			<td class="foswikiTableCol1"> &nbsp; </td>
			<td class="foswikiTableCol2 foswikiLastCol"> "Target M" ... </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Setup </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Comment </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Sample Name </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Sample Temperature </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> 3.21 +- 0.05 K; SP: 3.2; CF1 </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Sample Magnetic Field </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> 350.002 +- 0.005 G; SP: 350; WXY </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> No of Histos </td>
			<td align="center" class="foswikiTableCol1"> <code>Int_t</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Time Resolution </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> 0.1953125 ns </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> RedGreen Offsets </td>
			<td align="center" class="foswikiTableCol1 foswikiLast"> <code>TIntVector</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol foswikiLast"> <em>e.g.</em> 0; 20 </td>
		</tr>
	</tbody></table>
<p></p>
These entries should be clear except for the <code>RedGreen Offsets</code> and the column "Internal Type" which shortly will be discussed before specifying the content of the other required folders. 
<p></p> <ol>
<li type="i"> <code>RedGreen Offsets</code>: in case experiments are performed with external stimuli, there will be a collection of related histograms. For instance for electrical field experiments, there will be histograms for field on/off, doubling the number of needed histograms. In order to distinguish them easier in the data file, the <code>RedGreen Offsets</code> were introduced. One selection of histograms (assuming for the moment 8 detectors) will be numbered from 1 to 8 (lets say the field off ones). The other set of histograms (field on in this example) will then start with 21 through 28 (see table above). The same will be true for the detector information (see Sec. <a href="#DetectorInfoRequired" class="foswikiCurrentTopicLink"><code>DetectorInfo</code> Required</a>). The entry <code>No of Histos</code> will only give 8 for the given example, meaning that <span class='foswikiRedFG'>red</span>/<span class='foswikiGreenFG'>green</span> multiplication is defined rather via <code>RedGreen Offsets</code> than the number of histograms. 
</li> <li type="i"> Internal Types: in order to ease the handling of the <code>MusrRoot</code> run header, a class <code>TMusrRunHeader</code> is available which deals with it. The "Internal Type" specified, corresponds to the internal representation in within this class. In the <code>MusrRoot</code> file these entries are all saved as browsable <code>ROOT</code> strings (<code>TObjString</code>). The only special type is <code>TMusrRunPhysicalQuantity</code> which is introduced to deal with physical quantities. They always can be represented in the following way:
</li></ol> 
<pre>
&#60;property name&#62; &#60;value&#62; +- &#60;estimated error&#62; &#60;unit&#62;; SP: &#60;demand&#62;; &#60;description&#62;
</pre>
Not all of these values are needed to be given and depending on which are given, the representation in the <code>MusrRoot</code> file will be different (handled by <code>TMusrRunHeader</code>). Examples are given in the comment column of the table above. For details see <a href="#TMusrRunPhysicalQuantity" class="foswikiCurrentTopicLink"><code>TMusrRunPhysicalQuantity</code> - Possible Representations</a>.
<p></p>
A mock-up <code>TBrowser</code> print-out would look like the one shown in the following figure. You might notice, that at the end of each entry you find a " <code>-@X</code> ", where <code>X</code> is a number. This is an encoding of the internal type of the entry and is the price to be payed not using derived types. The next section will explain this in much more detail.
<p></p>
<img src="../pub/MUSR/MusrRoot/RunInfo.png" alt="=TMusrRunHeader= mock up. The red shaded entries are of type =TMusrRunPhysicalQuantity="/>
<p></p>
<code>TMusrRunHeader</code> mock up. The red shaded entries are of type <code>TMusrRunPhysicalQuantity</code>
<p></p>
<a name="TMusrRunHeaderConcept"></a>
<h1><a name="A_4_61TMusrRunHeader_61_Concept"></a> 4  <code>TMusrRunHeader</code> Concept </h1>
The different &#956;SR instruments need different information to be written into the data file (next to the most important ones: the histograms). The above defined properties are the <em>minimal number of required</em> ones. There are different possible approaches to deal with it on the implementation level.
<p></p> <ul>
<li> A base class dealing with <em>minimal required</em> standard is defined. Afterwards for each instrument a class is derived which is extending the base class to the needs of the instrument.
</li> <li> The base class is defined in a more abstract way, and some external, text-based description is given which defines the details of the instrument.
</li></ul> 
<p></p>
Even though the first approach is very clean, it would mean a lot of maintenance work. The 2nd approach is slightly more demanding for the handling class (<code>TMusrRunHeader</code> and helper classes), but having the advantage of easy maintainability and expandability. The idea is that all header information can be classified into 7 groups (see previous and following section(s)):
<p></p> <ol>
<li> Strings, represented by <code>TString</code>
</li> <li> Integers, represented by <code>Int_t</code>
</li> <li> Floating point numbers, represented by <code>Double_t</code>
</li> <li> Physical quantities, represented by <a href="#TMusrRunPhysicalQuantity" class="foswikiCurrentTopicLink"><code>TMusrRunPhysicalQuantity</code> - Possible Representations</a>
</li> <li> Collection of strings, represented by <code>TStringVector</code> 
</li> <li> Collection of integers, represented by <code>TIntVector</code> 
</li> <li> Collection of floating point numbers, represented by <code>TDoubleVector</code> 
</li></ol> 
<p></p>
These properties can be collected by themselves in form of vectors. This way any needed information can be written into the <code>ROOT</code> file. The class <code>TMusrRunHeader</code> is implementing this run header concept. In following section code snippets will be discussed, showing how this is used on level of the <code>MIDAS</code> analyzer, <code>musrfit</code> reader routine, and <code>any2many</code> conversion routines. The section <a href="#ValidateMusrRoot" class="foswikiCurrentTopicLink">Validation</a> will discuss how to validate <code>MusrRoot</code> files.
<p></p>
<h2><a name="A_4.1_User_Interface_for_61MusrRoot_61_Run_Header"></a> 4.1  User Interface for <code>MusrRoot</code> Run Header </h2>
There are two things needed to deal with the <code>MusrRoot</code> run header, namely writing it and reading it. I will start with the writing as will be done in the <code>MIDAS</code> analyzer.
<p></p>
<h3><a name="A_4.1.1_Writing_a_61MusrRoot_61_Run_Header"></a> 4.1.1  Writing a <code>MusrRoot</code> Run Header </h3>
An example program <code>write_musrRoot_runHeader</code> which is writing a full run header is part of the <code>musrfit</code> package. Here I will concentrate just on the most essential parts. First one needs an instance of <code>TMusrRunHeader</code>
<p></p>
<pre class="cplusplus">
TMusrRunHeader &#42;header &#61; new TMusrRunHeader();
TMusrRunPhysicalQuantity prop;
</pre>
<p></p>
<code>header</code> is the instance of <code>TMusrRunHeader</code>. <code>prop</code> is an instance of <code>TMusrRunPhysicalQuantity</code> which will be needed further down in the description. In the next step some run header entries will be added
<p></p>
<pre class="cplusplus">
header-&#62;Set(&#34;RunInfo/File Name&#34;, &#34;deltat&#95;tdc&#95;gps&#95;2871.root&#34;);
header-&#62;Set(&#34;RunInfo/Run Title&#34;, &#34;here comes the run title&#34;);
header-&#62;Set(&#34;RunInfo/Run Number&#34;, 2871);
</pre>
<p></p>
Adding information is done via the multiple overloaded <code>Set(&lt;pathName&gt;,&lt;value&gt;)</code> method. Here <code>&lt;pathName&gt;</code> is a string representing the "path" like representation in the <code>MusrRoot</code> file structure, followed by the "value" to be set, <em>e.g.</em> "=File Name=". <code>&lt;value&gt;</code> can be any of the types listed at the beginning of Sec. <a href="#TMusrRunHeaderConcept" class="foswikiCurrentTopicLink"><code>TMusrRunHeader</code> Concept</a>. Here a few examples how to set <code>TMusrRunPhysicalQuantity</code>.
<p></p>
<pre class="cplusplus">
prop.Set(&#34;Sample Temperature&#34;, 3.2, 3.21, 0.05, &#34;K&#34;, &#34;CF1&#34;);
header-&#62;Set(&#34;RunInfo/Sample Temperature&#34;, prop);

prop.Set(&#34;Time Resolution&#34;, 0.1953125, &#34;ns&#34;, &#34;TDC 9999&#34;);
header-&#62;Set(&#34;RunInfo/Time Resolution&#34;, prop);

prop.Set(&#34;CF3&#34;, MRH&#95;UNDEFINED, 3.27, 0.09, &#34;K&#34;, &#34;strange temperature&#34;);
header-&#62;Set(&#34;SampleEnvironmentInfo/CF3&#34;, prop);
</pre>
<p></p>
Here <code>TMusrRunPhysicalQuantity</code> objects are fed via the use of the overloaded set-method. For details see <a href="#TMusrRunPhysicalQuantity" class="foswikiCurrentTopicLink"><code>TMusrRunPhysicalQuantity</code> - Possible Representations</a>.
<p></p>
To set some property within "sub-sub-directories" it would like this:
<p></p>
<pre class="cplusplus">
header-&#62;Set(&#34;DetectorInfo/Detector001/Time Zero Bin&#34;, 3419.0);
</pre>
<p></p>
To write the whole run header into a file would look something like this:
<p></p>
<pre class="cplusplus">
TFile &#42;f &#61; new TFile(fileName, &#34;RECREATE&#34;, &#34;write&#95;musrRoot&#95;runHeader&#34;);
if (f-&#62;IsZombie()) {
  delete f;
  return -1;
}

// create the needed TFolder object
TFolder &#42;runHeader &#61; new TFolder(&#34;RunHeader&#34;, &#34;MusrRoot Run Header Info&#34;);

// create the &#34;directory&#34; structure
if (header-&#62;FillFolder(runHeader)) {
  runHeader-&#62;Write(); // write run header to file
}

f-&#62;Close();
</pre>
<p></p>
<h3><a name="A_4.1.2_Reading_a_61MusrRoot_61_Run_Header"></a> 4.1.2  Reading a <code>MusrRoot</code> Run Header </h3>
The following code snippet shows how the extract the full run header from the <code>MusrRoot</code> file.
<p></p>
<pre class="cplusplus">
TFile &#42;f &#61; new TFile(fileName, &#34;READ&#34;, &#34;read&#95;musrRoot&#95;runHeader&#34;);
if (f-&#62;IsZombie()) {
  delete f;
  return -1;
}

TFolder &#42;runHeader &#61; 0;
f-&#62;GetObject(&#34;RunHeader&#34;, runHeader);
if (runHeader &#61;&#61; 0) {
  cerr &#60;&#60; endl &#60;&#60; &#34;&#62;&#62; &#42;&#42;ERROR&#42;&#42; Couldn&#39;t get top folder RunHeader&#34;;
  closeFile(f);
  return -1;
}

TMusrRunHeader &#42;header &#61; new TMusrRunHeader(fileName);

if (!header-&#62;ExtractAll(runHeader)) {
  cerr &#60;&#60; endl &#60;&#60; &#34;&#62;&#62; &#42;&#42;ERROR&#42;&#42; couldn&#39;t extract all RunHeader information&#34;;
  closeFile(f);
  return -1;
}

f-&#62;Close();
delete f;
</pre>
<p></p>
The routine <code>ExtractAll(TFolder *runHeader)</code> decodes all the <code>TObjString</code> objects and fills internal data structures. This means when reading a <code>MusrRoot</code> -file the above handling is always needed. After the <code>ExtractAll</code> call, parameters can be extracted via the getter routines available. For instance to read the <code>Run Number</code>, the code would look like 
<p></p>
<pre class="cplusplus">
Bool&#95;t ok;
Int&#95;t ival;  
header-&#62;Get(&#34;RunInfo/Run Number&#34;, ival, ok);
if (ok)
  cout &#60;&#60; endl &#60;&#60; &#34;Run Number: &#34; &#60;&#60; ival;
else
  cout &#60;&#60; endl &#60;&#60; &#34;&#42;&#42;ERROR&#42;&#42; Couldn&#39;t obtain the &#39;Run Number&#39;.&#34;;
</pre>
<p></p>
Reading a <code>TMusrRunPhysicalQuantity</code> object, <em>e.g.</em> the <code>Sample Temperature</code> looks like this 
<p></p>
<pre class="cplusplus">
TMusrRunPhysicalQuantity prop;

header-&#62;Get(&#34;RunInfo/Sample Temperature&#34;, prop, ok);
if (ok) {
  cout &#60;&#60; endl &#60;&#60; &#34;Sample Temperature: &#34; &#60;&#60; prop.GetValue() &#60;&#60; &#34; +- &#34;;
  cout &#60;&#60; prop.GetError() &#60;&#60; &#34; &#34; &#60;&#60; prop.GetUnit().Data();
  cout &#60;&#60; &#34;; SP: &#34; &#60;&#60; prop.GetDemand() &#60;&#60; &#34;; &#34; &#60;&#60; prop.GetDescription().Data();
} else {
  cout &#60;&#60; endl &#60;&#60; &#34;&#42;&#42;ERROR&#42;&#42; Couldn&#39;t obtain the &#39;Sample Temperature&#39;.&#34;;
}
</pre>
<p></p>
<a name="ValidateMusrRoot"></a>
<h2><a name="A_4.2_Validation_of_a_61MusrRoot_61_File"></a> 4.2  Validation of a <code>MusrRoot</code> File </h2>
Since <code>MusrRoot</code> is an open and extensible file format a mechanism is needed to validate that a given file is indeed holding the <em>minimum of required</em> entries. To check this the following scheme is implemented in the program <code>musrRootValidation</code>: 
<p></p>
<img src="../pub/MUSR/MusrRoot/MusrRootValidationScheme.png" height="700" title="MusrRoot validation scheme"/>
<p></p>
<code>MusrRoot</code> validation scheme
<p></p>
In the following this validation scheme will be discussed as it is implemented in <code>musrRootValidation</code>:
<p></p> <ol>
<li> It is checked if the given file name is a <code>TFile</code>
</li> <li> The file structure is recursively parsed and mapped into an temporary XML file. XML is used since there are ample of parser and validation frameworks at hand. For details check any decent book about XML. Here the <code>libxml2</code> is used, because also <code>ROOT</code> is requiring it.
</li> <li> In a next step the XML file (holding the structure of the supposed <code>MusrRoot</code> file is validated against a XML schema. The <em>minimum of required</em> entries is described by <code>MusrRoot.xsd</code> which is part of <code>musrfit</code> but also available from the PSI/LMU web-page.
</li> <li> If the schema validation is successful additional semantic checks (like is the number of decay histograms the same as the number of detector entries, etc.) will be preformed. 
</li></ol> 
<p></p>
This validation scheme is useful for people which define instrument specific extensions of the base <code>MusrRoot</code>, as for instance the LEM instrument at PSI. It is also useful for people writing file converters in order to cross check if the generated file is valid.
<p></p>
<a name="RunInfoRequired"></a>
<h1><a name="A_5_61RunInfo_61_Required"></a> 5  <code>RunInfo</code> Required </h1>
<p></p>
<table class="foswikiTable" rules="none" border="1">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column">Name</a> </th>
			<th align="center" class="foswikiTableCol1"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column">Internal Type</a> </th>
			<th align="center" class="foswikiTableCol2 foswikiLastCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column">Comment</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Version </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> SVN version of <code>TMusrRunHeader</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Generic Validator URL </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> URL of the generic <code>MusrRoot</code> validation xsd-file. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> &nbsp; </td>
			<td class="foswikiTableCol1"> &nbsp; </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> <a href="http://lmu.web.psi.ch/facilities/software/MusrRoot/Validation/MusrRoot.xsd" target="_top">http://lmu.web.psi.ch/facilities/software/MusrRoot/Validation/MusrRoot.xsd</a> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Specific Validator URL </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> URL of the instrument specific validation xsd-file. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> &nbsp; </td>
			<td class="foswikiTableCol1"> &nbsp; </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> for LEM: <a href="http://lmu.web.psi.ch/facilities/software/MusrRoot/Validation/MusrRootLEM.xsd" target="_top">http://lmu.web.psi.ch/facilities/software/MusrRoot/Validation/MusrRootLEM.xsd</a> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Generator </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> Program which wrote the <code>MusrRoot</code> file, </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> &nbsp; </td>
			<td class="foswikiTableCol1"> &nbsp; </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em>  <code>nemu_analyzer</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> File Name </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> File name of the <code>MusrRoot</code> file, </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> &nbsp; </td>
			<td class="foswikiTableCol1"> &nbsp; </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em>  <code>deltat_tdc_gps_4295.root</code> </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Title </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Number </td>
			<td align="center" class="foswikiTableCol1"> <code>Int_t</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Start Time </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> ISO 8601 date time </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Stop Time </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> ISO 8601 date time </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Run Duration </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> run duration in sec </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Laboratory </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> PSI </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Instrument </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> GPS </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Muon Beam Momentum </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> 28.1 MeV/c </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Muon Species </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> positive, or negative muon </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Muon Source </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> Target E - Low Energy Muons or </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> &nbsp; </td>
			<td class="foswikiTableCol1"> &nbsp; </td>
			<td class="foswikiTableCol2 foswikiLastCol"> "Target M" ... </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Setup </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Comment </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Sample Name </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Sample Temperature </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> 3.21 +- 0.05 K; SP: 3.2; CF1 </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Sample Magnetic Field </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> 350.002 +- 0.005 G; SP: 350; WXY </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> No of Histos </td>
			<td align="center" class="foswikiTableCol1"> <code>Int_t</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Time Resolution </td>
			<td align="center" class="foswikiTableCol1"> <code>TMusrRunPhysicalQuantity</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> <em>e.g.</em> 0.1953125 ns </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> RedGreen Offsets </td>
			<td align="center" class="foswikiTableCol1 foswikiLast"> <code>TIntVector</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol foswikiLast"> <em>e.g.</em> 0; 20 </td>
		</tr>
	</tbody></table>
<p></p>
<a name="DetectorInfoRequired"></a>
<h1><a name="A_6_61DetectorInfo_61_Required"></a> 6  <code>DetectorInfo</code> Required </h1>
The <code>DetectorInfo</code> is organized in a sub-tree like
<p></p>
<pre>
DetectorInfo ---&#124;
                &#124;- Detector001
                &#124;- Detector002
                ...
</pre>
<p></p>
For each histogram in the <code>histos/DecayAnaModule</code> corresponds detector entry here. 
<p></p>
The numbering of the detectors has to correspond the its histogram, <em>e.g.</em> <code>hDecay023</code> &hArr; <code>Detector023</code>, <em>i.e.</em> potentially discontinuous to show <span class='foswikiRedFG'>red</span> / <span class='foswikiGreenFG'>green</span> breaks.
<p></p>
<code>Detector&lt;XXX&gt;</code> has the elements
<p></p>
<table class="foswikiTable" rules="none" border="1">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column">Name</a> </th>
			<th align="center" class="foswikiTableCol1"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column">Internal Type</a> </th>
			<th class="foswikiTableCol2 foswikiLastCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=2;table=3;up=0#sorted_table" title="Sort by this column">Comment</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Name </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> detector name, <em>e.g.</em> Left-NPP </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Histo Number </td>
			<td align="center" class="foswikiTableCol1"> <code>Int_t</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> histogram number. This number corresponds to the histogram number in the <code>histos/DecayAnaModule</code> sub-tree. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Histo Length </td>
			<td align="center" class="foswikiTableCol1"> <code>Int_t</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> length of the histogram </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> Time Zero Bin </td>
			<td align="center" class="foswikiTableCol1"> <code>Double_t</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> The type is <code>Double_t</code> since for the high-field spectrometer at PSI an <code>Int_t</code> representation would be not good enough. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> First Good Bin </td>
			<td align="center" class="foswikiTableCol1"> <code>Int_t</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> Last Good Bin </td>
			<td align="center" class="foswikiTableCol1 foswikiLast"> <code>Int_t</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol foswikiLast"> &nbsp; </td>
		</tr>
	</tbody></table>
<p></p>
<a name="SampleEnvironmentInfoRequired"></a>
<h1><a name="A_7_61SampleEnvironmentInfo_61_Required"></a> 7  <code>SampleEnvironmentInfo</code> Required </h1>
Here only a single entry is required, namely
<p></p>
<table class="foswikiTable" rules="none" border="1">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=0;table=4;up=0#sorted_table" title="Sort by this column">Name</a> </th>
			<th align="center" class="foswikiTableCol1"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=1;table=4;up=0#sorted_table" title="Sort by this column">Internal Type</a> </th>
			<th class="foswikiTableCol2 foswikiLastCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=2;table=4;up=0#sorted_table" title="Sort by this column">Comment</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> Cryo </td>
			<td align="center" class="foswikiTableCol1 foswikiLast"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol foswikiLast"> name of the used cryostat, <em>e.g.</em> Konti-2 </td>
		</tr>
	</tbody></table>
<p></p>
<a name="MagneticFieldEnvironmentInfoRequired"></a>
<h1><a name="A_8_61MagneticFieldEnvironmentInfo_61_Required"></a> 8  <code>MagneticFieldEnvironmentInfo</code> Required </h1>
<p></p>
Here only a single entry is required, namely 
<p></p>
<table class="foswikiTable" rules="none" border="1">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=0;table=5;up=0#sorted_table" title="Sort by this column">Name</a> </th>
			<th align="center" class="foswikiTableCol1"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=1;table=5;up=0#sorted_table" title="Sort by this column">Internal Type</a> </th>
			<th class="foswikiTableCol2 foswikiLastCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=2;table=5;up=0#sorted_table" title="Sort by this column">Comment</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> Magnet Name </td>
			<td align="center" class="foswikiTableCol1"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol"> name of the used magnet, <em>e.g.</em> WEW. </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> &nbsp; </td>
			<td class="foswikiTableCol1 foswikiLast"> &nbsp; </td>
			<td align="right" class="foswikiTableCol2 foswikiLastCol foswikiLast"> In case of ZF measurements, there might be an entry like <code>ZF</code>. </td>
		</tr>
	</tbody></table>
<p></p>
<a name="BeamlineInfoRequired"></a>
<h1><a name="A_9_61BeamlineInfo_61_Required"></a> 9  <code>BeamlineInfo</code> Required </h1>
<p></p>
Here only a single entry is required, namely 
<p></p>
<table class="foswikiTable" rules="none" border="1">
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=0;table=6;up=0#sorted_table" title="Sort by this column">Name</a> </th>
			<th align="center" class="foswikiTableCol1"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=1;table=6;up=0#sorted_table" title="Sort by this column">Internal Type</a> </th>
			<th class="foswikiTableCol2 foswikiLastCol"> <a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?cover=print;sortcol=2;table=6;up=0#sorted_table" title="Sort by this column">Comment</a> </th>
		</tr>
	</thead>
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> Name </td>
			<td align="center" class="foswikiTableCol1 foswikiLast"> <code>TString</code> </td>
			<td class="foswikiTableCol2 foswikiLastCol foswikiLast"> name of the beamline, <em>e.g.</em> <code>piM3.2</code>. </td>
		</tr>
	</tbody></table>
<p></p>
<h1><a name="A_10_Exhaustive_61MusrRoot_61_Tree_Including_Everything_Required"></a> 10  Exhaustive <code>MusrRoot</code> Tree Including Everything <em>Required</em> </h1>
Here it is assumed that there are <em>hypothetical</em> <span class='foswikiRedFG'>red</span> / <span class='foswikiGreenFG'>green</span> data with electric field on/off and light on/off, and hence 4 data sets per detector, and 8 detectors of the instrument: <code>left/forward, top/forward, right/forward, bottom/forward, left/backward, top/backward, right/backward, bottom/backward</code>. To show the whole tree structure, it will be splitted in the representation afterwards, but keep in mind: this will be all part of a single <code>MusrRoot</code> file. I will add comments in the tree structure by the symbol <code>#</code>. Lets start with the &#956;SR data histograms:
<p></p>
<pre>
histos -&#124;
        &#124;- DecayAnaModule -&#124;
                           &#124;- hDecay001 # left/forward, electric field off, light off
                           &#124;- hDecay002 # top/forward, electric field off, light off
                           &#124;- hDecay003 # right/forward, electric field off, light off
                           &#124;- hDecay004 # bottom/forward, electric field off, light off
                           ...
                           &#124;- hDecay007 # right/backward, electric field off, light off
                           &#124;- hDecay008 # bottom/backward, electric field off, light off
                           &#124;- hDecay011 # left/forward, electric field on, light off
                           &#124;- hDecay012 # top/forward, electric field on, light off
                           &#124;- hDecay013 # right/forward, electric field on, light off
                           &#124;- hDecay014 # bottom/forward, electric field on, light off
                           ...
                           &#124;- hDecay017 # right/backward, electric field on, light off
                           &#124;- hDecay018 # bottom/backward, electric field on, light off
                           &#124;- hDecay021 # left/forward, electric field off, light on
                           &#124;- hDecay022 # top/forward, electric field off, light on
                           &#124;- hDecay023 # right/forward, electric field off, light on
                           &#124;- hDecay024 # bottom/forward, electric field off, light on
                           ...
                           &#124;- hDecay027 # right/backward, electric field off, light on
                           &#124;- hDecay028 # bottom/backward, electric field off, light on
                           &#124;- hDecay031 # left/forward, electric field on, light on
                           &#124;- hDecay032 # top/forward, electric field on, light on
                           &#124;- hDecay033 # right/forward, electric field on, light on
                           &#124;- hDecay034 # bottom/forward, electric field on, light on
                           ...
                           &#124;- hDecay037 # right/backward, electric field on, light on
                           &#124;- hDecay038 # bottom/backward, electric field on, light on
                           ...
</pre>
<p></p>
 Comments: as can be seen the histograms are continuous numbered until there is a <span class='foswikiRedFG'>red</span> / <span class='foswikiGreenFG'>green</span> mode switch where the histogram number "jumps" (<em>e.g.</em> from <code>008</code> to <code>011</code>). In order to fill in the different <span class='foswikiRedFG'>red</span> / <span class='foswikiGreenFG'>green</span> histograms an offset is added (here 10, 20, and 30).
<p></p>
Next there will be the slowcontrol histograms:
<p></p>
<pre>
histos -&#124;
        &#124;- SCAnaModule -&#124;
                        &#124;- hSampleTemperature
                        &#124;- hMagneticField
                        &#124;- hModeratorTemperature
                        ...
</pre>
<p></p>
Comments: Theses histograms show typical time histograms of temperature, magnetic field, etc. <em>during</em> the run. The number of the histograms and their content will be quite different for each instrument.
<p></p>
Next the whole <code>RunHeader</code>. Here the information will be grouped in different folders collecting related information, like general run info, detector info, sample and magnetic field environment info, beamline info, etc.
<p></p>
<pre>
RunInfo:
  000 - Version: $Id: TMusrRunHeader.cpp 5092 2012-03-13 07:47:00Z nemu $ -&#64;0
  001 - Generic Validator URL: http://lmu.web.psi.ch/facilities/software/MusrRoot/Validation/MusrRoot.xsd -&#64;0
  002 - Specific Validator URL: http://lmu.web.psi.ch/facilities/software/MusrRoot/Validation/MusrRootLEM.xsd -&#64;0
  003 - Generator: nemu&#95;analyzer -&#64;0
  004 - File Name: lem12&#95;his&#95;0234.root -&#64;0
  005 - Run Title: here comes the run title -&#64;0
  006 - Run Number: 234 -&#64;1
  007 - Run Start Time: 2012-04-19 14:25:22 -&#64;0
  008 - Run Stop Time: 2012-04-19 19:13:47 -&#64;0
  009 - Run Duration: 17305 sec -&#64;3
  010 - Laboratory: PSI -&#64;0
  011 - Instrument: LEM -&#64;0
  012 - Muon Beam Momentum: 28.1 MeV/c -&#64;3
  013 - Muon Species: positive muon -&#64;0
  014 - Muon Source: target E -&#64;0
  015 - Setup: a very special setup -&#64;0
  016 - Comment: nothing more to be said -&#64;0
  017 - Sample Name: the best ever -&#64;0
  018 - Sample Temperature: 3.21 +- 0.05 K; SP: 3.2 -&#64;3
  019 - Sample Magnetic Field: 350.002 +- 0.005 G; SP: 350 -&#64;3
  020 - No of Histos: 8 -&#64;1
  021 - Time Resolution: 0.1953125 ns;  TDC 9999 -&#64;3
  022 - RedGreen Offsets: 0; 10; 20; 30
DetectorInfo:
  Detector001:
    023 - Name: Left/Forward - electric field off, light off -&#64;0
    024 - Histo Number: 1 -&#64;1
    025 - Histo Length: 66661 -&#64;1
    026 - Time Zero Bin: 3419.000000 -&#64;2
    027 - First Good Bin: 3419 -&#64;1
    028 - Last Good Bin: 66661 -&#64;1
  Detector002:
    029 - Name: Top/Forward - electric field off, light off -&#64;0
    030 - Histo Number: 2 -&#64;1
    031 - Histo Length: 66661 -&#64;1
    032 - Time Zero Bin: 3419.000000 -&#64;2
    033 - First Good Bin: 3419 -&#64;1
    034 - Last Good Bin: 66661 -&#64;1

  ...

  Detector038:
    213 - Name: Bottom/Backward - electric field on, light on -&#64;0
    214 - Histo Number: 38 -&#64;1
    215 - Histo Length: 66661 -&#64;1
    216 - Time Zero Bin: 3419.000000 -&#64;2
    217 - First Good Bin: 3419 -&#64;1
    218 - Last Good Bin: 66661 -&#64;1

SampleEnvironmentInfo:
  219 - Cryo: Konti-1 -&#64;0
  220 - Insert: X123 -&#64;0
  221 - Orientation: c-axis perp spin, perp field. spin perp field -&#64;0
MagneticFieldEnvironmentInfo:
  222 - Magnet Name: WEW -&#64;0
  223 - Current: 17.34 A -&#64;3
BeamlineInfo:
  224 - Name: muE4 -&#64;0
ScalerInfo:
  225 - Ip: 12332123 -&#64;1
RunSummary:
  0000 - Wed Oct  5 01:30:37 2011 Run 2856 started.
  0001 - Wed Oct  5 02:02:51 2011 Run 2856 stopped.
  0002 - 
  0003 - LCO, T&#61;170.02(K), wTF ~30(G)/5.18(A), Tr/Sa&#61;15.02/8.50(kV), E&#61;5.63(keV), LEDb off, BP off
  0004 - &#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;
  0005 - 
  0006 - #BUC---- B e g i n of User Comment ------ Do not edit this line
  0007 - #EUC----   E n d   of User Comment ------ Do not edit this line
  0008 - 
  0009 - &#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;   E v e n t  definition   &#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;
  0010 -
  0011 - Events: 
  0012 - Event&#95;0: (BC)-MCP1-(e+); Event&#95;1:( BC)-TD-MCP2-(e+); Event&#95;2: LEmuSR, (BC)-TD-e 
  ...
</pre>
<p></p>
Comment: the last sub-tree <code>RunSummary</code> is not following <code>TMusrRunHeader</code> rule <code>&lt;number&gt; - &lt;label&gt;: &lt;value&gt; -@&lt;type&gt;</code>. It is added in the instrument analyzer directly by other means than the <code>TMusrRunHeader::Set</code> -method. This is no problem! Since <code>RunSummary</code> is not part of the <em>required</em> <code>MusrRoot</code> -file. One is quite free in adding any <code>ROOT</code> based information here.
<p></p>
<a name="TMusrRunPhysicalQuantity"></a>
<h1><a name="A_11_61TMusrRunPhysicalQuantity_61_45_Possible_Representations"></a> 11  <code>TMusrRunPhysicalQuantity</code> - Possible Representations </h1>
A physical property can be described as
<p></p>
<pre>
&#60;property name&#62;: &#60;value&#62; +- &#60;estimated error&#62; &#60;unit&#62;; SP: &#60;demand&#62;; &#60;description&#62;
</pre>
<p></p>
where <code>&lt;property name&gt;</code> is the name of the quantity, <em>e.g.</em> <code>Sample Temperature</code>, <code>&lt;value&gt;</code> the value of the quantity, <code>&lt;estimated error&gt;</code> the error estimate, <em>e.g.</em> the standard deviation, <code>&lt;unit&gt;</code> the unit, <em>e.g.</em> <code>K</code>, <code>&lt;demand&gt;</code> a demand value, <em>e.g.</em> the set point of the temperature. <code>&lt;description&gt;</code> is a possible additional comment for this quantity.
<p></p>
Note, not all of these quantities are always needed. The list of handled combination are given hereafter together with the C++ code snipped how to set it. It is assumed that <code>TMusrRunPhysicalQuantity prop;</code> is somewhere defined.
<p></p>
<pre>
&#60;property name&#62;: &#60;value&#62; &#60;unit&#62; &#91;; &#60;description&#62;]
</pre>
<p></p>
Code snippet:
<pre class="cplusplus">
prop.Set(&#34;Muon Beam Momentum&#34;, 28.1, &#34;MeV/c&#34;);
header-&#62;Set(&#34;RunInfo/Muon Beam Momentum&#34;, prop);

prop.Set(&#34;Time Resolution&#34;, 0.1953125, &#34;ns&#34;, &#34;TDC 9999&#34;);
header-&#62;Set(&#34;RunInfo/Time Resolution&#34;, prop);
</pre>
<p></p>
Result in the <code>RunHeader/RunInfo</code>:
<pre>
011 - Muon Beam Momentum: 28.1 MeV/c -&#64;3
013 - Time Resolution: 0.1953125 ns; TDC 9999 -&#64;3 
</pre>
<p></p>
The number on front of the token (<em>e.g.</em> <code>011</code> in front of <code>Muon Beam Momentum</code>) will depend on the position where the entry has been added. The last token, <code>-@3</code>, is the encoding of the type: here <code>TMusrRunPhysicalQuantity</code>.
<p></p>
<hr />
<p></p>
<pre>
&#60;property name&#62;: &#60;val&#62; +- &#60;err&#62; &#60;unit&#62;&#91;; &#60;description&#62;]
</pre>
<p></p>
Code snippet:
<pre class="cplusplus">
prop.Set(&#34;CF3&#34;, MRH&#95;UNDEFINED, 3.27, 0.09, &#34;K&#34;, &#34;strange temperature&#34;);
header-&#62;Set(&#34;SampleEnvironmentInfo/CF3&#34;, prop);
</pre>
<p></p>
Result in the <code>RunHeader/SampleEnvironmentInfo</code>:
<pre>
033 - CF3: 3.27 +- 0.09 K; strange temperature -&#64;3 
</pre>
<p></p>
<hr />
<p></p>
<pre>
&#60;property name&#62;: &#60;val&#62; &#60;unit&#62;; SP: &#60;demand&#62;&#91;; &#60;description&#62;]
</pre>
<p></p>
Code snippet:
<pre class="cplusplus">
prop.Set(&#34;CF4&#34;, 3.25, 3.28, &#34;K&#34;);
header-&#62;Set(&#34;SampleEnvironmentInfo/CF4&#34;, prop);

prop.Set(&#34;CF5&#34;, 3.26, 3.29, &#34;K&#34;, &#34;another strange temperature&#34;);
header-&#62;Set(&#34;SampleEnvironmentInfo/CF5&#34;, prop);
</pre>
<p></p>
Result in the <code>RunHeader/SampleEnvironmentInfo</code>:
<pre>
034 - CF4: 3.28 K; SP: 3.25 -&#64;3
035 - CF5: 3.29 K; SP: 3.26; another strange temperature -&#64;3
</pre>
<p></p>
<hr />
<p></p>
<pre>
&#60;property name&#62;: &#60;value&#62; +- &#60;estimated error&#62; &#60;unit&#62;; SP: &#60;demand&#62;; &#60;description&#62;
</pre>
<p></p>
Code snippet:
<pre class="cplusplus">
prop.Set(&#34;Sample Magnetic Field&#34;, 350.0, 350.002, 0.005, &#34;G&#34;, &#34;WXY&#34;);
header-&#62;Set(&#34;RunInfo/Sample Magnetic Field&#34;, prop);
</pre>
<p></p>
Result in the <code>RunHeader/SampleEnvironmentInfo</code>:
<pre>
017 - Sample Magnetic Field: 350.002 +- 0.005 G; SP: 350.0; WXY -&#64;3
</pre>
<p></p>
-- <a href="https://intranet.psi.ch/Main/AndreasSuter">AndreasSuter</a> - 29 March 2012 </div>
<div class="foswikiContentFooter"></div><!-- -->
<!-- -->
<!-- -->
<!-- -->
<span class='foswikiClear'></span>
<div class="foswikiMetaData foswikiHideOnPrint foswikiMetaDataNotAllowed">
<div class="jqTabPane jqTabPanePlain {select:'1', autoMaxExpand:false, animate:true, minHeight:230}">
<!-- -->
<!-- -->
<!-- --><!-- -->
<!-- -->
<!-- TAB --><div id='jqTab1657' class="attachments jqAjaxTab jqTab {url: 'https://intranet.psi.ch/wiki/bin/rest/RenderPlugin/template?name=metadata;expand=attachments;topic=MUSR.MusrRoot;render=on;1424704900'}">
<h2 class='jqTabLabel'>Attachments <span class='foswikiAttachmentsCount'>(2)</span></h2>
<div class='jqTabContents' >
  <div class='foswikiFormSteps foswikiAttachmentsProcess'><span class='jqAjaxLoader'>&nbsp;</span></div>
  </div></div><!-- //ENDTAB --><!-- -->
<!-- -->
<!-- -->
<!-- --><!-- -->
<!-- --><!-- -->
<!-- --><!-- -->
<!-- -->
<!-- -->
<!-- --><!-- --><!-- -->
<!-- --><!-- -->
<!-- -->
</div><!-- //ENDTABPANE --> 
</div>
<!-- -->
<!-- -->
<div class="foswikiFormSteps">
<a name="topic-actions"></a>
  <div class="patternTopicActions foswikiFormStep">
	 <span class="patternActionButtons"><span><a href='https://intranet.psi.ch/wiki/bin/edit/MUSR/MusrRoot?t=1424704900' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='foswikiAccessKey'>E</span>dit</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span class="foswikiRequiresChangePermission"><a href='https://intranet.psi.ch/wiki/bin/attach/MUSR/MusrRoot' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='foswikiAccessKey'>A</span>ttach</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='MusrRootc99a.html?cover=print;cover=print' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='foswikiAccessKey'>P</span>rint version</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://intranet.psi.ch/print/php/pdf.php?url=MUSR/MusrRoot?cover=print' title='PDF version of this topic'>PDF</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><span class="foswikiRequiresChangePermission"><a href='https://intranet.psi.ch/wiki/bin/oops/MUSR/MusrRoot?template=oopshistory' rel='nofollow' title='View total topic history' accesskey='h'><span class='foswikiAccessKey'>H</span>istory</a></span>: r7&nbsp;<a rel="nofollow" href="https://intranet.psi.ch/wiki/bin/compare/MUSR/MusrRoot?rev1=6;rev2=7">&lt;</a>&nbsp;<a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?rev=6">r6</a>&nbsp;<a rel="nofollow" href="https://intranet.psi.ch/wiki/bin/compare/MUSR/MusrRoot?rev1=5;rev2=6">&lt;</a>&nbsp;<a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?rev=5">r5</a>&nbsp;<a rel="nofollow" href="https://intranet.psi.ch/wiki/bin/compare/MUSR/MusrRoot?rev1=4;rev2=5">&lt;</a>&nbsp;<a rel="nofollow" href="https://intranet.psi.ch/MUSR/MusrRoot?rev=4">r4</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://intranet.psi.ch/MUSR/MusrRoot?template=backlinksweb' rel='nofollow' title='Search the MUSR Web for topics that link to here' accesskey='b'><span class='foswikiAccessKey'>B</span>acklinks</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://intranet.psi.ch/MUSR/MusrRoot?raw=on' rel='nofollow' title='View without formatting' accesskey='v'><span class='foswikiAccessKey'>V</span>iew wiki text</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://intranet.psi.ch/MUSR/MusrRoot?refresh=on' title='Refresh images and LaTeX charts'>Refresh</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://intranet.psi.ch/MUSR/MusrRoot?template=more&amp;maxrev=7&amp;currrev=7' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='foswikiAccessKey'>M</span>ore topic actions</a></span></span>
  </div>
</div></div><div class="patternInfo"><span class="patternRevInfo">Topic revision: r7 - 29 Mar 2012, <a href="https://intranet.psi.ch/Main/AndreasSuter">AndreasSuter</a></span></div>
</div>
</div><div id="patternSideBar"><div id="patternClearHeaderLeft"></div>
<div id="patternSideBarContents">
<div class="patternLeftBarPersonal">
<ul><li class="patternLogIn"><a href="https://intranet.psi.ch/wiki/bin/logon/MUSR/MusrRoot">Log In</a> or <a href="https://intranet.psi.ch/System/UserRegistration">Register</a></li></ul>
</div>
<p></p>
<p></p>
<b>PSI Webs</b> <ul>
<li> <span class="foswikiIcon"><img src="../pub/System/DocumentGraphics/psi.png" width="16" height="16" alt="psi" /></span> <a href="https://intranet.psi.ch/Main/WebHome">Main</a>
</li> <li> <span class="foswikiIcon"><img src="../pub/System/DocumentGraphics/psi.png" width="16" height="16" alt="psi" /></span> <a href="https://intranet.psi.ch/Main/WebList">weitere Webs</a>
</li></ul> 
<hr />
<b>System Webs</b> <ul>
<li> <span class="foswikiIcon"><img src="../pub/System/DocumentGraphics/foswiki.png" width="16" height="16" alt="foswiki" /></span> <a href="https://intranet.psi.ch/Sandbox/WebHome">Sandbox</a>
</li> <li> <span class="foswikiIcon"><img src="../pub/System/DocumentGraphics/foswiki.png" width="16" height="16" alt="foswiki" /></span> <a href="https://intranet.psi.ch/System/WebHome">Documentation</a>
</li></ul> 
<hr /> <ul>
<li> <a href="https://intranet.psi.ch/MUSR/WebCreateNewTopic?parent=MusrRoot" target="_top"><span class="foswikiIcon"><img src="../pub/System/DocumentGraphics/newtopic.png" width="16" height="16" alt="newtopic" /></span> Create New Topic</a> 
</li> <li> <a href="WebTopicList.html"> <span class="foswikiIcon"><img src="../pub/System/DocumentGraphics/index.png" width="16" height="16" alt="index" /></span> Show All Topics</a> 
</li> <li> <a href="WebSearch.html"> <span class="foswikiIcon"><img src="../pub/System/DocumentGraphics/searchtopic.png" width="16" height="16" alt="searchtopic" /></span> Search in Topics</a> 
</li> <li> <a href="https://intranet.psi.ch/search/#?fq=%20-web_search:Applications%26fq%3D%7B!tag%3Dweb%20q.op%3DOR%7Dweb:(MUSR)&amp;sort=date%20desc"> <span class="foswikiIcon"><img src="../pub/System/DocumentGraphics/changes.png" width="16" height="16" alt="changes" /></span> Recent Changes</a>
</li> <li> <a href="WebNotify.html"> <span class="foswikiIcon"><img src="../pub/System/DocumentGraphics/notify.png" width="16" height="16" alt="notify" /></span> Define Notifications</a>
</li></ul> 
<p></p>
</div></div>
</div>
<div class="clear">&nbsp;</div>
</div></div><div id="patternTopBar">
<div id="patternTopBarContentsWrapper">
<div id="patternTopBarContents"><table border="0" cellpadding="0" cellspacing="0" style="width:100%" summary="">
<tr><td valign="middle"><span id="foswikiLogo" class="foswikiImage"><a href="WebHome.html"><img src="../pub/Main/WebPreferences/psi_logo_150.gif" border="0" alt="Paul Scherrer Institut" style="border:none; margin: -8px 0 0 15px;" /></a></span></td>
<td align="right" valign="top" class="patternMetaMenu" id="psimetanav">
<p></p> <ul>
<li> <form name="quickSearchForm" id="solrSearchForm" action="https://intranet.psi.ch/search/">		<input type="text" class="foswikiInputField" id="quickSearchBox" name="q" value="" size="18" />		<input type="image" class="searchsubmit" alt="Search" value="Suche..." name="sa" src="../webbase/img/search.png">	</form>
</li> <li> <form name="changeLanguage"    action="https://intranet.psi.ch/wiki/bin/oops/MUSR/MusrRoot" method="get">    <input type="hidden" name="redirectto" value="/MUSR/MusrRoot?cover=print" />    <select name="language" class="foswikiSelect"        onchange="document.changeLanguage.submit()">    <option  value="de">Deutsch</option> <option selected="selected" value="en">English</option></select>    <input type="hidden" name="template" value="oopslanguagechanged" />    <noscript>        <input class="foswikiButton" type="submit"            value="Change language" />    </noscript> </form>
</li></ul> 
<p></p>
<p></p>
</td></tr></table>
</div><!--/patternTopBarContents-->
</div><!--/patternTopBarContentsWrapper-->
</div><!-- /patternTopBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar">Ideas, requests, problems regarding <a href="https://intranet.psi.ch/Main/WebHome">PSI Wiki</a>? <a href="mailto&#58;psi&#46;intranet&#64;psi&#46;ch&#63;subject&#61;PSI&#32;Wiki&#37;20Feedback&#37;20on&#37;20MUSR&#46;MusrRoot">Send feedback</a></div></div></div>
</div>
</div>
</div>
</div></body>
<!-- Mirrored from intranet.psi.ch/MUSR/MusrRoot?cover=print by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 23 Feb 2015 15:22:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-1"><!-- /Added by HTTrack -->
</html>
<p></p>
<p></p>
<p></p>
<p></p>